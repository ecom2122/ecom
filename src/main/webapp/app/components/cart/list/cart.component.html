<div>
  <h2 data-cy="ProductsHeading">
    <span jhiTranslate="global.menu.entities.cart">Cart</span>
  </h2>

  <jhi-alert-error></jhi-alert-error>

  <jhi-alert></jhi-alert>

  <div *ngIf="cart?.lines?.length === 0">
    <span jhiTranslate="ecomApp.cart.empty">Empty card</span>
  </div>

  <div *ngIf="cart && cart?.lines?.length !== 0">
    <div>
      <div id="ecom-cart-products">
        <div class="ecom-cart" *ngFor="let lineProduct of cart?.lines; trackBy: trackId" data-cy="entityTable">
          <div class="ecom-cart-img">
            <div>
              <img src="{{ lineProduct.product?.imagePath }}" srcset="../../../content/images/default-products.png" alt="Image produit" />
            </div>
          </div>
          <div class="ecom-product-price">
            <span>{{ lineProduct.product?.price | number: '0.2' }} €/u</span>
            <!--            <span>{{ product.weight * product.price / 1000 }}</span>-->
          </div>
          <div class="ecom-product-info">
            <span
              ><a [routerLink]="['/product', lineProduct.product?.id, 'view']">{{ lineProduct.product?.name }}</a></span
            >
            <span>{{ lineProduct.product?.origin }}</span>
          </div>
          <div class="ecom-product-subinfo">
            <span>{{ lineProduct.product?.brand }}</span>
            <span>{{ lineProduct.product?.weight }} {{ lineProduct.product?.weightUnit }}</span>
          </div>
          <div>
            <span *ngFor="let tags of lineProduct.product?.tags; let last = last">
              <a [routerLink]="['/tag', tags.id, 'view']">{{ tags.id }}</a
              >{{ last ? '' : ', ' }}
            </span>
          </div>
          <div class="ecom-productcart-button">
            <div>
              <div>
                <button
                  class="ecom-product-button-minus ecom-button"
                  type="submit"
                  (click)="updateQuantityProductCart(lineProduct, (lineProduct.quantity ?? 0) - 1)"
                  data-cy="entityDecreaseProductCartButton"
                >
                  <fa-icon icon="minus"></fa-icon>
                </button>
                <input
                  class="ecom-product-button-text"
                  type="text"
                  pattern="[0-9]*"
                  (change)="updateQuantityProductCartByText(lineProduct, $event)"
                  [value]="lineProduct.quantity ?? 0"
                />
                <button
                  class="ecom-product-button-plus ecom-button"
                  type="submit"
                  (click)="updateQuantityProductCart(lineProduct, (lineProduct.quantity ?? 0) + 1)"
                  data-cy="entityIncreaseProductCartButton"
                >
                  <fa-icon icon="plus"></fa-icon>
                </button>
              </div>
              <div>
                <button class="ecom-button" type="submit" (click)="deleteLine(lineProduct)" data-cy="entityDeleteButton">
                  <fa-icon icon="times"></fa-icon>
                  <span jhiTranslate="entity.action.delete">Delete</span>
                </button>
              </div>
            </div>
          </div>
          <div class="ecom-productcart-price">
            <span>{{ lineProduct.product!.price! * lineProduct!.quantity! | number: '0.2' }} €</span>
          </div>
        </div>
      </div>
      <div>Total du panier : {{ total }} €</div>
      <div class="ecom-button-see-cart">
        <button type="submit" routerLink="/payment" class="ecom-button ecom-button-next">Valider le panier</button>
      </div>
    </div>
  </div>
</div>
